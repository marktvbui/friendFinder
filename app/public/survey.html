<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Friend Finder</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
<!--   <link rel="stylesheet" href="css/style.css">
 -->  <link rel="author" href="humans.txt">
</head>

<body>

<div class="container">
  <div class="form">
    <h2>Survey Questions</h2>
    <hr>
    <h3><strong>About You</strong></h3>
    <h4>Name (Required)</h4>
    <input type="text" name="" id="name" class="personalInfo" required="">
    <h4>Link to Photo Image (Required)</h4>
    <input type="text" name="" id="photo" class="personalInfo" required="">
    <hr>

    <h3><strong>Question 1</strong></h3>
    <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>

    <div class="dropdown">
      <select data-placeholder="" id="q1" class="questionSelect" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" required="">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>

    <h3><strong>Question 2</strong></h3>
    <h4>Generally speaking, you rely more on your experience than your imagination.</h4>
    <div class="dropdown">
      <select data-placeholder="" id="q2" class="questionSelect" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" required="">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>

    <h3><strong>Question 3</strong></h3>
    <h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
    <div class="dropdown">
      <select data-placeholder="" id="q3" class="questionSelect" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" required="">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>

    <h3><strong>Question 4</strong></h3>
    <h4>You rarely do something just out of sheer curiosity.</h4>
    <div class="dropdown">
      <select data-placeholder="" id="q4" class="questionSelect" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" required="">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>


    <h3><strong>Question 5</strong></h3>
    <h4>People can rarely upset you.</h4>
    <div class="dropdown">
      <select data-placeholder="" id="q5" class="questionSelect" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" required="">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>

    <h3><strong>Question 6</strong></h3>
    <h4>It is often difficult for you to relate to other people’s feelings.</h4>
    <div class="dropdown">
      <select data-placeholder="" id="q6" class="questionSelect" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" required="">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>

    <h3><strong>Question 7</strong></h3>
    <h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
    <div class="dropdown">
      <select data-placeholder="" id="q7" class="questionSelect" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" required="">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>

    <h3><strong>Question 8</strong></h3>
    <h4>You rarely get carried away by fantasies and ideas.</h4>
    <div class="dropdown">
      <select data-placeholder="" id="q8" class="questionSelect" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" required="">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>

    <h3><strong>Question 9</strong></h3>
    <h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h4>
    <div class="dropdown">
      <select data-placeholder="" id="q9" class="questionSelect" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" required="">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>

    <h3><strong>Question 10</strong></h3>
    <h4>You feel more energetic after spending time with a group of people.</h4>
    <div class="dropdown">
      <select data-placeholder="" id="q10" class="questionSelect" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" required="">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
      <br>
      <br>

      <!-- Submit Button -->
      <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
   Submit</button>

      <hr>
  </div>
</div>

  <!-- Modal -->
  <div id="resultsModal" class="modal fade" role="dialog" style="display: none;">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">×</button>
          <h2 class="modal-title"><strong>Best Match</strong></h2>
        </div>
        <div class="modal-body">
          <h2 id="matchName"></h2>
          <img id="matchImg" src="" alt="" css="max-height:550px;max-width: 550px;">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>

    </div>
  </div>

  <script type="text/javascript">
  $('.dropdown-toggle').dropdown();

    // Capture the form inputs
    $("#submit").on("click", function() {

      // Form validation
      function validateForm() {
        var isValid = true;
        $('.personalInfo').each(function() {
          if ($(this).val() === ""){
            console.log('personal info is empty');
            isValid = false;
          };
        });
        $('.questionSelect').each(function() {
          if ($(this).val() === "") {
            console.log('you forgot to fill in all the blanks');
            isValid = false
          };
        });
        return isValid;
      }

      // If all required fields are filled
      if (validateForm() == true) {
        // Create an object for the user's data
        var userData = {
          name: $("#name").val(),
          photo: $("#photo").val(),
          answers: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val()]
        }

        // Grab the URL of the website
        var currentURL = window.location.origin;
        // AJAX post the data to the friends API.
        $.post(currentURL + "/api/friends", userData, function(data) {
          // Grab the result from the AJAX post so that the best match's name and photo are displayed.
          console.log(userData);
          $("#matchName").text(data[0].name);
          $('#matchImg').attr("src", data[0].photo);

          // Show the modal with the best match
          $("#resultsModal").modal('toggle');
          clearForm();
        });
      } else {
        alert("Please fill out all fields before submitting!");
        return false;
      }

    });

    function clearForm() {
      $('.personalInfo').each(function(){
        ($(this).val(''));
      });
      $('.questionSelect').each(function(){
        ($(this).val(''));
      });
    }

    function matchingProfiles() {
// Determine the user's most compatible friend using the following as a guide:
// Convert each user's results into a simple array of numbers (ex: [5, 1, 4, 4, 5, 1, 2, 5, 4, 1]).
// With that done, compare the difference between current user's scores against those from other users, question by question. Add up the differences to calculate the totalDifference.
// Example:
// User 1: [5, 1, 4, 4, 5, 1, 2, 5, 4, 1]
// User 2: [3, 2, 6, 4, 5, 1, 2, 5, 4, 1]
// Total Difference: 2 + 1 + 2 = 5
// Remember to use the absolute value of the differences. Put another way: no negative solutions! Your app should calculate both 5-3 and 3-5 as 2, and so on.
// The closest match will be the user with the least amount of difference.

// will need a bubble sort, comparing answers from user to all candidates inside the api, and returning the user with the lowest difference.
    }

    function displayQuestions() {
      var questions = ['Your mind is always buzzing with unexplored ideas and plans.', 'Generally speaking, you rely more on your experience than your imagination.', 'You find it easy to stay relaxed and focused even when there is some pressure.', 'You rarely do something just out of sheer curiosity.', 'People can rarely upset you.', 'It is often difficult for you to relate to other people’s feelings.', 'In a discussion, truth should be more important than people’s sensitivities.', 'You rarely get carried away by fantasies and ideas.', 'You think that everyone’s views should be respected regardless of whether they are supported by facts or not.', 'You feel more energetic after spending time with a group of people.'];


    };
  </script>

</body>
</html>